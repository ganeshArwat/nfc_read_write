<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Web NFC Demo</title>
</head>
<body>
  <h1>Web NFC Demo</h1>
  <button id="scan">Scan NFC Tag</button>
  <button id="write">Write to NFC Tag</button>
  <pre id="output"></pre>

  <script>
    const output = document.getElementById("output");

    function log(msg) {
      output.textContent += msg + "\n";
    }

    if ("NDEFReader" in window) {
      const ndef = new NDEFReader();

      // Scan button
      document.getElementById("scan").addEventListener("click", async () => {
        try {
          await ndef.scan();
          alert("‚úÖ Scan started successfully. Tap an NFC tag...");
          ndef.onreading = event => {
            alert("üì° NFC tag detected!");
            const message = event.message;
            for (const record of message.records) {
              alert(`Record type: ${record.recordType}`);
              alert(`Media type: ${record.mediaType}`);
              alert(`Data: ${record.data ? record.data : "N/A"}`);
            }
          };
        } catch (error) {
          alert("‚ùå Error starting scan: " + error);
        }
      });

      // Write button
      document.getElementById("write").addEventListener("click", async () => {
        try {
          await ndef.write("Hello from Web NFC - Ganesh!");
          alert("‚úÖ Message written to NFC tag.");
        } catch (error) {
          alert("‚ùå Write failed: " + error);
        }
      });

    } else {
      alert("‚ùå Web NFC not supported on this device/browser.");
    }
  </script>
</body>
</html>
